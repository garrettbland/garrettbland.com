<html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta httpequiv="Content-Type" content="text/html; charset=utf-8"><meta name="language" content="English"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Eleventy Image Plugins</title><meta name="description" content=""><meta property="og:title" content="Eleventy Image Plugins"><meta property="og:site_name" content="Eleventy Image Plugins"><meta property="og:url" content=""><meta property="og:description" content=""><meta property="og:type" content="website"><link rel="shortcut icon" type="image/ico" href="/favicon.ico"><link rel="stylesheet" href="/style.css?v=1635015516843"></head><body x-data="darkMode" class="transition-all" x-bind:class="isDarkModeEnabled ? 'dark bg-blueGray-900' : 'bg-gray-50'"><main class="mb-24"><nav class="max-w-xl mx-auto px-4"><div class="flex justify-between items-center py-4"><a class="font-lexa relative z-20 text-xl dark:text-white font-semibold hover:underline" href="/">Garrett Bland</a><div class="flex items-center flex-row space-x-2"><button class="transform ease-in-out duration-150 hover:scale-110 origin-center p-1 hover:bg-gray-100 dark:hover:bg-blue-900 rounded-lg" x-on:click="toggleDarkMode()"><div class="relative w-8 h-8"><svg class="h-8 w-8 p-1 text-gray-700 hover:text-gray-700 dark:text-blue-50 absolute top-0 left-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-show="isDarkModeEnabled" x-transition.opacity="" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <svg class="h-8 w-8 p-1 text-gray-700 absolute top-0 left-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-show="!isDarkModeEnabled" x-transition.opacity="" xmlns="http://www.w3.org/2000/svg"><path d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg></div></button> <a class="transform ease-in-out duration-150 hover:scale-110 origin-center p-1 hover:bg-gray-100 dark:hover:bg-blue-900 rounded-lg" href="https://github.com/garrettbland" rel="noreferrer" target="_blank"><img alt="github-logo" class="w-8 h-8" src="/images/github.png" loading="lazy"> </a><a class="transform ease-in-out duration-150 hover:scale-110 origin-center p-1 hover:bg-gray-100 dark:hover:bg-blue-900 rounded-lg" href="https://twitter.com/gbland777" rel="noreferrer" target="_blank"><img alt="twitter-logo" class="w-8 h-8" src="/images/twitter.png" loading="lazy"></a></div></div><div class="h-px w-full bg-gradient-to-r from-transparent via-gray-200 to-transparent mb-6 dark:via-indigo-700"></div></nav><section><div><article class="prose prose-lg dark:prose-dark"><h1 class="leading-loose">Eleventy Image Plugins</h1><p>I use <a href="https://www.11ty.dev/">11ty</a> a lot for my personal and client projects. After building a handful of sites, I realized I wanted a way to force myself to add thing's that I miss from time to time, like an `alt` tag on an image. I know there are linting rules I could setup, but with `.liquid` files, I had a tough time figuring it out.</p><p>I decided I would build an 11ty plugin that would scan my code while in development, and yell at me if I had forgotten the `alt` tag on an image.</p><p>I built a plugin for myself that uses the `jsdom` package and scans the HTML output from the build. It looks for any `img` elements, and then checks the attributes for the `alt` tag. If any of the values are empty or undefined, then an error will be thrown. The code ended up being pretty simple.</p><pre><code class="language-javascript">const { JSDOM } = require('jsdom')

module.exports = (eleventyConfig) =&gt; {
    eleventyConfig.addTransform('img-alt-tag-check', (content, outputPath) =&gt; {
        if (outputPath.endsWith('.html')) {
            const dom = new JSDOM(content)
            const document = dom.window.document

            const [...images] = document.getElementsByTagName('img')

            images.forEach((image) =&gt; {
                const alt_tag_value = image.getAttribute('alt')
                if (!alt_tag_value) {
                    throw Error(`Missing \`alt\` tag from: ${[...outputPath.split('/')][1]}`)
                }
            })

            return document.documentElement.outerHTML
        } else {
            return content
        }
    })
}
</code></pre><p>I also then used the same principals, to build another plugin that would add native lazy loading to images. I put these together as two separate projects and published to NPM for others to download and use. Below are links to the packages.</p><ul><li><a href="*%20https://www.npmjs.com/package/@garrettbland/img-alt-tag-check">https://www.npmjs.com/package/@garrettbland/img-alt-tag-check</a></li><li><a href="*%20https://www.npmjs.com/package/@garrettbland/lazy-load-images">https://www.npmjs.com/package/@garrettbland/lazy-load-images</a></li></ul></article></div></section></main><script>function darkMode () {
            return {
                isDarkModeEnabled: false,
                init: function () {
                    console.log('Alpine ready to roll...')

                    // Watch for dark mode changing and update local storage
                    this.$watch('isDarkModeEnabled', (newValue) => {
                        console.log(`Setting dark mode in local storage to ${newValue}...`)
                        localStorage.setItem('isDarkModeEnabled', newValue)
                    })

                    // Initially grab local storage and set if local storage key is present
                    if (localStorage.getItem('isDarkModeEnabled')) {
                        this.isDarkModeEnabled = JSON.parse(localStorage.getItem('isDarkModeEnabled'))
                    }
                },
                toggleDarkMode: function () {
                    this.isDarkModeEnabled = !this.isDarkModeEnabled
                }
            }
        }</script><script src="/alpine.js?v=1635015516843"></script><script src="/prism.min.js"></script></body></html>