<html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta httpequiv="Content-Type" content="text/html; charset=utf-8"><meta name="language" content="English"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Setting up Tailwind CSS with Webpack and Purge CSS</title><meta name="description" content=""><meta property="og:title" content="Setting up Tailwind CSS with Webpack and Purge CSS"><meta property="og:site_name" content="Setting up Tailwind CSS with Webpack and Purge CSS"><meta property="og:url" content=""><meta property="og:description" content=""><meta property="og:type" content="website"><link rel="shortcut icon" type="image/ico" href="/favicon.ico"><link rel="stylesheet" href="/style.css?v=1635015516843"></head><body x-data="darkMode" class="transition-all" x-bind:class="isDarkModeEnabled ? 'dark bg-blueGray-900' : 'bg-gray-50'"><main class="mb-24"><nav class="max-w-xl mx-auto px-4"><div class="flex justify-between items-center py-4"><a class="font-lexa relative z-20 text-xl dark:text-white font-semibold hover:underline" href="/">Garrett Bland</a><div class="flex items-center flex-row space-x-2"><button class="transform ease-in-out duration-150 hover:scale-110 origin-center p-1 hover:bg-gray-100 dark:hover:bg-blue-900 rounded-lg" x-on:click="toggleDarkMode()"><div class="relative w-8 h-8"><svg class="h-8 w-8 p-1 text-gray-700 hover:text-gray-700 dark:text-blue-50 absolute top-0 left-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-show="isDarkModeEnabled" x-transition.opacity="" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <svg class="h-8 w-8 p-1 text-gray-700 absolute top-0 left-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-show="!isDarkModeEnabled" x-transition.opacity="" xmlns="http://www.w3.org/2000/svg"><path d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg></div></button> <a class="transform ease-in-out duration-150 hover:scale-110 origin-center p-1 hover:bg-gray-100 dark:hover:bg-blue-900 rounded-lg" href="https://github.com/garrettbland" rel="noreferrer" target="_blank"><img alt="github-logo" class="w-8 h-8" src="/images/github.png" loading="lazy"> </a><a class="transform ease-in-out duration-150 hover:scale-110 origin-center p-1 hover:bg-gray-100 dark:hover:bg-blue-900 rounded-lg" href="https://twitter.com/gbland777" rel="noreferrer" target="_blank"><img alt="twitter-logo" class="w-8 h-8" src="/images/twitter.png" loading="lazy"></a></div></div><div class="h-px w-full bg-gradient-to-r from-transparent via-gray-200 to-transparent mb-6 dark:via-indigo-700"></div></nav><section><div><article class="prose prose-lg dark:prose-dark"><h1 class="leading-loose">Setting up Tailwind CSS with Webpack and Purge CSS</h1><p class="flex flex-row items-center"><span class="mr-2"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> </span>Posted on <time class="ml-1" datetime="2020-06-20 19:00">Jun 20, 2020</time></p><p>A few years ago when I found out about this css utility called <a href="https://tailwindcss.com/">Tailwind CSS</a>, I was absolutely blown away with how much time it saved me and how quickly it made me wire up websites with CSS. It made designing fun again.</p><p>Whenever I get started with a new javascript project, Tailwind is my absolute go to now. With their built in purge and tree shake to remove unused classes, combined with Post CSS, its a beast. I often found myself annoyed trying to get it worked into my build pipeline, so here is my process.</p><p>If you are wanting to see the final code, <a href="https://github.com/garrettbland/tailwindcss-webpack-setup">click here to view github repo.</a></p><p>*I'm writing this article for Tailwind version <code>1.4.6</code> on a macbook</p><h3>Step 1. Fire up a new project</h3><p>I'm covering my steps from the complete beginning. If you already have a project, move ahead. Create a new site folder, get into it, and then init. If you are new to webpack, click here to read <a href="https://garrettbland.com/blog/my-simple-webpack-setup/">my simple webpack setup</a>.</p><pre><code class="language-shell">mkdir tailwindcss-webpack-site &amp;&amp; cd tailwindcss-webpack-site
</code></pre><pre><code class="language-shell">npm init -y
</code></pre><h3>Step 2. Install Dependencies</h3><p>Now lets install webpack, tailwindcss, and postcss loader so we can process our tailwind css file with <a href="https://postcss.org/">Post CSS</a>. We also add style-loader so we can inject the css into the DOM.</p><pre><code class="language-shell">npm install webpack webpack-cli tailwindcss style-loader postcss-loader
</code></pre><h3>Step 3. Create Starting Points</h3><p>With any webpack application, we need a starting point. Lets create our starting javascript file as well as our starting HTML file</p><pre><code class="language-shell">touch app.js index.html webpack.config.js
</code></pre><h3>Step 4. Setup webpack config</h3><p>You will notice that we have our <code>postcss-loader</code> in the rules for css files, and ignoring <code>node_modules</code> directory. We also have our complied output going to <code>main.js</code>. Copy this config into your new <code>webpack.config.js</code></p><pre><code class="language-javascript">const path = require('path')

module.exports = {
    entry: path.resolve(__dirname, 'app.js'),
    output: {
        path: path.resolve(__dirname, 'dist'),
        filename: 'main.js',
    },
    module: {
        rules: [
            {
                test: /\.css$/i,
                exclude: /node_modules/,
                use: ['style-loader', 'postcss-loader'],
            },
        ],
    },
}
</code></pre><h3>Step 5. Setup Tailwind css</h3><p>Following Tailwinds documentation, we can use their <code>@tailwind</code> directive to include tailwind in our main css file. Lets create a new style sheet for our application in our <code>src</code> folder with <code>app.js</code></p><pre><code class="language-shell">touch style.css
</code></pre><p>Now that we have our new applications main stylesheet, lets add in the tailwind directives. Copy this into your new <code>style.css</code> file</p><pre><code class="language-css">@tailwind base;

@tailwind components;

@tailwind utilities;
</code></pre><h3>Step 6. Create tailwind config file</h3><p>This is an optional step according to the tailwind documentation. The tailwind config is not required, but I highly advise it and its part of this setup. Tailwind has a nice built in command to generate this for us. The command below will create a config file for us called <code>tailwind.config.js</code></p><pre><code class="language-shell">npx tailwindcss init
</code></pre><h3>Step 7. Setup Post CSS config</h3><p>Now that we have Post CSS installed, we can create a config file and give it some extra instructions and what plugins we want to use with it. Create a new config file</p><pre><code class="language-shell">touch postcss.config.js
</code></pre><p>Now lets require our <code>tailwindcss</code> plugin so Post CSS knows how to handle Tailwind CSS. Add the following to <code>postcss.config.js</code></p><pre><code class="language-javascript">module.exports = {
    plugins: [require('tailwindcss')],
}
</code></pre><h3>Step 8. Include our stylesheet</h3><p>We now need to make sure our new style.css file gets imported into our project so webpack can run the postcss-loader against any css files. Add this import into your <code>app.js</code>. The style-loader we installed earlier will take care of injecting the built tailwind styles into the DOM of the page.</p><pre><code class="language-javascript">import './style.css'
</code></pre><h3>Step 9. Setup HTML</h3><p>Everything should be wired up to this point. Now all that is left is to setup our main HTML page and test tailwind out. Add this content into <code>index.html</code></p><pre><code class="language-html">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Your baller site&lt;/title&gt;
    &lt;/head&gt;
    &lt;body class="bg-gray-800 flex items-center justify-center"&gt;
        &lt;div class="bg-white rounded-lg p-4 shadow mt-24"&gt;
            &lt;h1 class="font-bold text-gray-900"&gt;Your new tailwind css site&lt;h1&gt;
            &lt;p class="text-gray-700"&gt;Create something cool!&lt;/p&gt;
        &lt;/div&gt;
        &lt;!-- reference our main.js file webpack built --&gt;
        &lt;script src="dist/main.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><h3>Step 10. Add in build script</h3><p>Open up <code>package.json</code>, and add in a new build script with the following below.</p><pre><code class="language-json">"build:dev": "webpack --mode development"
</code></pre><h3>Step 11. Give it a test drive!</h3><p>Now we have our main HTML file referencing our file webpack will build, lets fire off a build to compile and test out our new site.</p><pre><code class="language-shell">npm run build:dev
</code></pre><p>If everything went to plan, you should be able to open up <code>index.html</code> in your favorite browser and see something like this.</p><p><img src="/images/tailwindcss-webpack-purgecss/demo-site-preview.png" alt="/images/tailwindcss-webpack-purgecss/demo-site-preview.png" loading="lazy"></p><h3>Step 12: Purging unused css and reducing file size.</h3><p>When you ran your build command, you may have noticed the file sizes and thought that they looked a little hefty. Thats because on its own, tailwind is a pretty beefy utility. Using Tailwind's built in Purge, we can have it parse our files and remove any styling that isn't used, resulting in a much smaller file size.</p><p><img src="/images/tailwindcss-webpack-purgecss/large-file-size.png" alt="/images/tailwindcss-webpack-purgecss/large-file-size.png" loading="lazy"></p><p>You can see here that its <strong>1.51 Megabyte</strong>, which is pretty big.</p><p>Earlier we generated a <code>tailwind.config.js</code> file. Lets open that up, and add in the following to the purge array. This can template files like <code>liquid</code>, <code>ejs</code>, <code>jsx</code>, or even just javascript files such as <code>.js</code>, <code>.vue</code>, <code>.svelte</code>, ect. Basically anything that references the style names.</p><p>In our case, lets just add all <code>html</code> files within our project to the purge array.</p><pre><code class="language-javascript">module.exports = {
    purge: ['./**/*.html'],
    theme: {
        extend: {},
    },
    variants: {},
    plugins: [],
}
</code></pre><p>By default, Tailwind won't run purge any css files unless the <code>NODE_ENV</code> is set to <code>production</code>. Lets add in this environment variable into a new build script. Add the following to our <code>package.json</code></p><pre><code class="language-json">"build:prod": "export NODE_ENV=production &amp;&amp; webpack --mode production"
</code></pre><p>Now lets run our build command for production and see the difference in file size.</p><pre><code class="language-shell">npm run build:prod
</code></pre><p>Woot! 🎉Now we are down to <strong>16.7KB</strong>, very big difference and will allow us to deliver our site faster to users.</p><p><img src="/images/tailwindcss-webpack-purgecss/reduced-file-size.png" alt="/images/tailwindcss-webpack-purgecss/reduced-file-size.png" loading="lazy"></p><h3>Thats it!</h3><p>You have successfully setup tailwind with webpack and purgecss!</p></article></div></section></main><script>function darkMode () {
            return {
                isDarkModeEnabled: false,
                init: function () {
                    console.log('Alpine ready to roll...')

                    // Watch for dark mode changing and update local storage
                    this.$watch('isDarkModeEnabled', (newValue) => {
                        console.log(`Setting dark mode in local storage to ${newValue}...`)
                        localStorage.setItem('isDarkModeEnabled', newValue)
                    })

                    // Initially grab local storage and set if local storage key is present
                    if (localStorage.getItem('isDarkModeEnabled')) {
                        this.isDarkModeEnabled = JSON.parse(localStorage.getItem('isDarkModeEnabled'))
                    }
                },
                toggleDarkMode: function () {
                    this.isDarkModeEnabled = !this.isDarkModeEnabled
                }
            }
        }</script><script src="/alpine.js?v=1635015516843"></script><script src="/prism.min.js"></script></body></html>